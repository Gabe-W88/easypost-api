# CSV Column Verification

**Purpose:** Verify all CSV columns are properly mapped to Supabase columns

## CSV Columns vs Supabase Columns

| CSV Column # | CSV Column Name | Supabase Column | Status | Notes |
|--------------|----------------|-----------------|--------|-------|
| A | Application # | `application_id` | ✅ | Saved |
| B | Date and time submitted | `created_at` | ✅ | Auto-generated |
| C | Email address of applicant | `email` | ✅ | Saved |
| D | Phone number of applicant | `phone` | ✅ | Saved |
| E | First name of applicant | `first_name` | ✅ | Saved |
| F | Middle name of applicant | `middle_name` | ✅ | Saved |
| G | Last name of applicant | `last_name` | ✅ | Saved |
| H | Date of birth | `date_of_birth` | ✅ | Saved |
| I | Driver's License Number | `license_number` | ✅ | Saved |
| J | State of Issue | `license_state` | ✅ | Saved |
| K | License Expiration Date | `license_expiration` | ✅ | Saved |
| L | Street Address (of Driver's License) | `street_address` | ✅ | Saved |
| M | Street Address 2 (of Driver's License) | `street_address_2` | ✅ | Saved |
| N | City (of Driver's License) | `city` | ✅ | Saved |
| O | State (of Driver's License) | `state` | ✅ | Saved |
| P | Zip Code (of Driver's License) | `zip_code` | ✅ | Saved |
| Q | Passenger Car Endorsement? (Y/N) | `license_types` JSONB | ✅ | Query: contains 'passenger' |
| R | Motorcycle Endorsement? (Y/N) | `license_types` JSONB | ✅ | Query: contains 'motorcycle' |
| S | Commercial/Other Endorsement? (Y/N) | `license_types` JSONB | ✅ | Query: contains 'commercial' or 'other' |
| T | Brithplace City | `birthplace_city` | ✅ | Saved |
| U | Brithplace State/Country | `birthplace_state` | ✅ | Saved |
| V | Where will you drive abroad | `drive_abroad` | ✅ | Saved |
| W | Departure date from USA | `departure_date` | ✅ | Saved |
| X | Permit Effective Date | `permit_effective_date` | ✅ | Saved |
| Y | Getting an IDP (Y/N) | `selected_permits` JSONB | ✅ | Query: contains 'idp' |
| Z | Getting an IADP (Y/N) | `selected_permits` JSONB | ✅ | Query: contains 'iadp' |
| AA | **Shipping Recipient Name** | `shipping_recipient_name` | ✅ | Saved |
| AB | **Shipping Recipient Phone** | `shipping_recipient_phone` | ✅ | Saved |
| AC | **Shipping Street Address** | `shipping_street_address` | ✅ | Saved (domestic/military only) |
| AD | **Shipping Street Address 2** | `shipping_street_address_2` | ✅ | Saved (domestic/military only) |
| AE | **Shipping City** | `shipping_city` | ✅ | Saved (domestic/military only) |
| AF | **Shipping State** | `shipping_state` | ✅ | Saved (domestic/military only) |
| AG | **Shipping Postal Code** | `shipping_postal_code` | ✅ | Saved (domestic/military only) |
| AH | **Shipping Country** | `shipping_country` | ✅ | Saved (all types, normalized) |
| AI | **Delivery Instructions** | `shipping_delivery_instructions` | ✅ | Saved |
| AJ | **International Full Address** | `international_full_address` | ✅ | Saved (international only) |
| AK | **International Local Address** | `international_local_address` | ✅ | Saved (international only) |
| AL | **PCCC Code** | `pccc_code` | ✅ | Saved (Korea only) |
| AM | -- (empty) | N/A | - | Empty column |
| AN | -- (empty) | N/A | - | Empty column |
| AO | -- (empty) | N/A | - | Empty column |
| AP | (empty) | N/A | - | Empty column |
| AQ | (empty) | N/A | - | Empty column |
| AR | Delivery location type selected | `shipping_category` | ✅ | Saved |
| AS | Delivery speed selected | `processing_option` | ✅ | Saved |
| AT | Transaction value ($) | `amount_paid` | ✅ | Saved in webhook.js |
| AU | Shipping label autogenerated (y/n) | `shipping_label_generated` | ✅ | Saved |
| AV | Automatic Tracking No. | `tracking_number` | ✅ | Column exists, updated later |
| AW | Ship by date | `ship_by_date` | ✅ | Saved (calculated) |
| AX | Manual fields --> | N/A | - | Manual entry by Jamie |
| AY | Reviewed and shipping label made | N/A | - | Manual entry by Jamie |
| AZ | Printed | N/A | - | Manual entry by Jamie |
| BA | IDP obtained and shipped | N/A | - | Manual entry by Jamie |
| BB | Follow-up email sent | N/A | - | Manual entry by Jamie |
| BC | Notes (from Fast IDP) | N/A | - | Manual entry by Jamie |

## Shipping Fields Breakdown

Based on the CSV requirement: **"(include columns for all the shipping information fields from the third page of the application - okay for them each to be on separate rows)"**

### All Shipping Types (Domestic/International/Military):
1. ✅ Recipient Name → `shipping_recipient_name`
2. ✅ Recipient Phone → `shipping_recipient_phone`
3. ✅ Country → `shipping_country` (normalized to 2-char code)
4. ✅ Delivery Instructions → `shipping_delivery_instructions`

### Domestic/Military Only:
5. ✅ Street Address → `shipping_street_address`
6. ✅ Street Address 2 → `shipping_street_address_2`
7. ✅ City → `shipping_city`
8. ✅ State → `shipping_state`
9. ✅ Postal Code → `shipping_postal_code`

### International Only:
10. ✅ Full Address → `international_full_address`
11. ✅ Local Address → `international_local_address`
12. ✅ PCCC Code → `pccc_code` (Korea only)

## Verification

**All required columns are saved!** ✅

The only potential issue is that `shipping_country` might not be populated for domestic/military shipments if `formData.shippingCountry` is empty. Let me check if we need to default it to "US" for domestic/military.

